import{b as z,d as U,e as G,f as O,g as J,h as P,i as Y}from"./chunk-PDLEJYTI.js";import{a as D,b as A,c as W,d as F,e as R,f as L,g as B,h as j,i as Q}from"./chunk-XRCY3F4P.js";import{j as T,k as V,l as q}from"./chunk-COI7XSY5.js";import{$a as C,Ga as s,La as k,Qa as I,U as S,Ua as b,Z as w,a as E,bb as o,c as y,cb as r,db as N,eb as v,fb as f,ga as m,gb as c,ha as p,hb as d,ib as h,jb as u,kb as g,lb as M}from"./chunk-V5DL4BIA.js";var x=class l{constructor(e){this.firestore=e}getMadeiras(){let e=O(this.firestore,"madeiras");return U(e,{idField:"id"})}addMadeira(e){let t=O(this.firestore,"madeiras");return G(t,e)}deleteMadeira(e){let t=P(this.firestore,`madeiras/${e}`);return J(t)}updateMadeira(e,t){let n=P(this.firestore,`madeiras/${e}`);return Y(n,t)}static \u0275fac=function(t){return new(t||l)(w(z))};static \u0275prov=S({token:l,factory:l.\u0275fac,providedIn:"root"})};function Z(l,e){if(l&1){let t=v();o(0,"div",11)(1,"div",12)(2,"h3"),d(3,"Editar Madeira"),r(),o(4,"label"),d(5," Nome: "),o(6,"input",13),M("ngModelChange",function(a){m(t);let i=c();return g(i.madeiraEditando.nome,a)||(i.madeiraEditando.nome=a),p(a)}),r()(),o(7,"label"),d(8," Tamanho: "),o(9,"input",13),M("ngModelChange",function(a){m(t);let i=c();return g(i.madeiraEditando.tamanho,a)||(i.madeiraEditando.tamanho=a),p(a)}),r()(),o(10,"label"),d(11," Quantidade: "),o(12,"input",14),M("ngModelChange",function(a){m(t);let i=c();return g(i.madeiraEditando.quantidade,a)||(i.madeiraEditando.quantidade=a),p(a)}),r()(),o(13,"button",15),f("click",function(){m(t);let a=c();return p(a.salvarEdicao())}),d(14,"Salvar"),r(),o(15,"button",15),f("click",function(){m(t);let a=c();return p(a.cancelarEdicao())}),d(16,"Cancelar"),r()()()}if(l&2){let t=c();s(6),u("ngModel",t.madeiraEditando.nome),s(3),u("ngModel",t.madeiraEditando.tamanho),s(3),u("ngModel",t.madeiraEditando.quantidade)}}function $(l,e){if(l&1){let t=v();o(0,"tr")(1,"td"),d(2),r(),o(3,"td"),d(4),r(),o(5,"td"),d(6),r(),o(7,"td")(8,"button",16),f("click",function(){let a=m(t).$implicit,i=c();return p(i.editar(a))}),d(9,"Editar"),r(),o(10,"button",17),f("click",function(){let a=m(t).$implicit,i=c();return p(i.excluir(a.id))}),d(11,"Excluir"),r()()()}if(l&2){let t=e.$implicit;s(2),h(t.nome),s(2),h(t.tamanho),s(2),h(t.quantidade)}}var H=class l{constructor(e){this.madeiraService=e}madeiras=[];novaMadeira={nome:"",tamanho:"",quantidade:0};ngOnInit(){this.madeiraService.getMadeiras().subscribe(e=>this.madeiras=e)}adicionar(){this.novaMadeira.nome=this.validaNome(this.novaMadeira.nome),this.novaMadeira.tamanho=this.validaTamanho(this.novaMadeira.tamanho),this.novaMadeira.quantidade=this.validaQuantidade(this.novaMadeira.quantidade),this.verificaPeca(this.novaMadeira)?this.madeiras.forEach(e=>{e.nome==this.novaMadeira.nome&&e.tamanho==this.novaMadeira.tamanho&&this.madeiraService.updateMadeira(e.id,{quantidade:e.quantidade+this.novaMadeira.quantidade})}):(this.madeiraService.addMadeira(this.novaMadeira).then(()=>{this.novaMadeira={nome:"",tamanho:"",quantidade:0}}),console.log(this.madeiras))}excluir(e){this.madeiraService.deleteMadeira(e)}editarando=!1;madeiraEditando={nome:"",tamanho:"",quantidade:0};editar(e){this.madeiraEditando=E({},e),this.editarando=!0}salvarEdicao(){if(this.madeiraEditando.id){let e=this.madeiraEditando,{id:t}=e,n=y(e,["id"]);n.nome=this.validaNome(n.nome),n.tamanho=this.validaTamanho(n.tamanho),n.quantidade=this.validaQuantidade(n.quantidade),this.madeiraService.updateMadeira(t,n).then(()=>{this.editarando=!1})}}cancelarEdicao(){this.editarando=!1}validaNome(e){return e!=""&&e!=null&&e!=null?e.toUpperCase():"NOME INVALIDO, RECRIAR OBJETO"}validaQuantidade(e){return e>0?e:0}validaTamanho(e){let t=e.split("x"),n=[6,15,18,20,25,30];if(t.length===3){let a=parseInt(t[0],10),i=parseInt(t[1],10),_=parseInt(t[2],10);return isNaN(a)||isNaN(i)||isNaN(_)?"ALGUM NUMERO FOI DIGITADO ERRADO":n.includes(i)?a>0&&a<2700&&_>0&&_<2700?`${a} x ${i} x ${_}`:"MEDIDAS FORA DO PADR\xC3O":"ESPESSURA INVALIDA"}else return"FORMATO INVALIDO, RECRIAR OBJETO"}verificaPeca(e){return!!this.madeiras.some(n=>n.nome===e.nome&&n.tamanho===e.tamanho)}static \u0275fac=function(t){return new(t||l)(k(x))};static \u0275cmp=I({type:l,selectors:[["app-madeiras"]],decls:28,vars:5,consts:[[3,"ngSubmit"],["name","nome","placeholder","Nome","required","",3,"ngModelChange","ngModel"],["name","tamanho","placeholder","Tamanho","required","",3,"ngModelChange","ngModel"],["name","quantidade","type","number","placeholder","Quantidade","required","",3,"ngModelChange","ngModel"],["type","submit"],["class","modal",4,"ngIf"],["action","Seach"],["type","text"],[1,"scrollable-table"],[1,"tabela-madeiras"],[4,"ngFor","ngForOf"],[1,"modal"],[1,"modal-content"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[3,"click"],[1,"btn-editar",3,"click"],[1,"btn-excluir",3,"click"]],template:function(t,n){t&1&&(o(0,"section")(1,"h2"),d(2,"Controle de Madeiras"),r(),o(3,"form",0),f("ngSubmit",function(){return n.adicionar()}),o(4,"input",1),M("ngModelChange",function(i){return g(n.novaMadeira.nome,i)||(n.novaMadeira.nome=i),i}),r(),o(5,"input",2),M("ngModelChange",function(i){return g(n.novaMadeira.tamanho,i)||(n.novaMadeira.tamanho=i),i}),r(),o(6,"input",3),M("ngModelChange",function(i){return g(n.novaMadeira.quantidade,i)||(n.novaMadeira.quantidade=i),i}),r(),o(7,"button",4),d(8,"Adicionar"),r()(),b(9,Z,17,3,"div",5),o(10,"form",6),N(11,"input",7),o(12,"button",4),d(13,"Procurar"),r()(),o(14,"div",8)(15,"table",9)(16,"thead")(17,"tr")(18,"th"),d(19,"Nome"),r(),o(20,"th"),d(21,"Tamanho"),r(),o(22,"th"),d(23,"Quantidade"),r(),o(24,"th"),d(25,"A\xE7\xF5es"),r()()(),o(26,"tbody"),b(27,$,12,3,"tr",10),r()()()()),t&2&&(s(4),u("ngModel",n.novaMadeira.nome),s(),u("ngModel",n.novaMadeira.tamanho),s(),u("ngModel",n.novaMadeira.quantidade),s(3),C("ngIf",n.editarando),s(18),C("ngForOf",n.madeiras))},dependencies:[q,T,V,Q,L,D,B,A,W,j,R,F],styles:["section[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}table.tabela-madeiras[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;max-height:80vh;overflow-y:auto;display:block}table.tabela-madeiras[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#333}table.tabela-madeiras[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}table.tabela-madeiras[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.btn-editar[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin:0 15px}.btn-editar[_ngcontent-%COMP%]:hover{background-color:#0b7dda}.btn-excluir[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin:0 15px}.btn-excluir[_ngcontent-%COMP%]:hover{background-color:#da190b}table.tabela-madeiras[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.tabela-madeiras[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:center}th[_ngcontent-%COMP%]{width:20vw}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:999;padding:10px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;max-width:750px;width:100%;box-shadow:0 6px 20px #00000040;animation:_ngcontent-%COMP%_slideIn .3s ease-in-out;display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px;font-weight:700;color:#444}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:180%;padding:10px;border:1px solid #ccc;border-radius:6px;font-size:14px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;cursor:pointer;margin:5px;transition:background-color .3s ease}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{background-color:#4caf50;color:#fff}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type:hover{background-color:#45a049}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{background-color:#f44336;color:#fff}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type:hover{background-color:#da190b}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{padding:15px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}}"]})};export{H as MadeirasComponent};
