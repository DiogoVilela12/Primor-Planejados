import{b as B,d as j,e as Q,f as v,g as U,h as x,i as G}from"./chunk-S4EBPHJ7.js";import{a as A,b as k,c as q,d as F,e as R,f as T,g as V,h as W,i as L}from"./chunk-3DCUZOKZ.js";import{f as w,g as D}from"./chunk-AUI4J55U.js";import{$a as c,Ca as l,Ha as S,La as P,Pa as E,T as C,Va as y,Xa as i,Y as O,Ya as r,Za as I,_a as N,ab as _,bb as o,cb as p,db as u,eb as g,fa as h,fb as M,ga as b}from"./chunk-AK4YJH4H.js";var f=class s{constructor(e){this.firestore=e}getMadeiras(){let e=v(this.firestore,"madeiras");return j(e,{idField:"id"})}addMadeira(e){let t=v(this.firestore,"madeiras");return Q(t,e)}deleteMadeira(e){let t=x(this.firestore,`madeiras/${e}`);return U(t)}updateMadeira(e,t){let a=x(this.firestore,`madeiras/${e}`);return G(a,t)}static \u0275fac=function(t){return new(t||s)(O(B))};static \u0275prov=C({token:s,factory:s.\u0275fac,providedIn:"root"})};function H(s,e){if(s&1){let t=N();i(0,"tr")(1,"td"),o(2),r(),i(3,"td"),o(4),r(),i(5,"td"),o(6),r(),i(7,"td")(8,"button",10),c("click",function(){let d=h(t).$implicit,n=_();return b(n.editar(d))}),o(9,"Editar"),r(),i(10,"button",11),c("click",function(){let d=h(t).$implicit,n=_();return b(n.excluir(d.id))}),o(11,"Excluir"),r()()()}if(s&2){let t=e.$implicit;l(2),p(t.nome),l(2),p(t.tamanho),l(2),p(t.quantidade)}}var z=class s{constructor(e){this.madeiraService=e}madeiras=[];novaMadeira={nome:"",tamanho:"",quantidade:0};ngOnInit(){this.madeiraService.getMadeiras().subscribe(e=>this.madeiras=e)}adicionar(){this.novaMadeira.nome=this.validaNome(this.novaMadeira.nome),this.novaMadeira.tamanho=this.validaTamanho(this.novaMadeira.tamanho),this.novaMadeira.quantidade=this.validaQuantidade(this.novaMadeira.quantidade),this.verificaPeca(this.novaMadeira)?this.madeiras.forEach(e=>{e.nome==this.novaMadeira.nome&&e.tamanho==this.novaMadeira.tamanho&&this.madeiraService.updateMadeira(e.id,{quantidade:e.quantidade+this.novaMadeira.quantidade})}):(this.madeiraService.addMadeira(this.novaMadeira).then(()=>{this.novaMadeira={nome:"",tamanho:"",quantidade:0}}),console.log(this.madeiras))}excluir(e){this.madeiraService.deleteMadeira(e)}editar(e){let t=prompt("Editar nome:",e.nome);t&&this.madeiraService.updateMadeira(e.id,{nome:t})}validaNome(e){return e!=""&&e!=null&&e!=null?e.toUpperCase():"NOME INVALIDO, RECRIAR OBJETO"}validaQuantidade(e){return e>0?e:0}validaTamanho(e){let t=e.split("x"),a=[6,15,18,20,25,30];if(t.length===3){let d=parseInt(t[0],10),n=parseInt(t[1],10),m=parseInt(t[2],10);return isNaN(d)||isNaN(n)||isNaN(m)?"ALGUM NUMERO FOI DIGITADO ERRADO":a.includes(n)?d>0&&d<2700&&m>0&&m<2700?`${d} x ${n} x ${m}`:"MEDIDAS FORA DO PADR\xC3O":"ESPESSURA INVALIDA"}else return"FORMATO INVALIDO, RECRIAR OBJETO"}verificaPeca(e){return!!this.madeiras.some(a=>a.nome===e.nome&&a.tamanho===e.tamanho)}static \u0275fac=function(t){return new(t||s)(S(f))};static \u0275cmp=P({type:s,selectors:[["app-madeiras"]],decls:27,vars:4,consts:[[3,"ngSubmit"],["name","nome","placeholder","Nome","required","",3,"ngModelChange","ngModel"],["name","tamanho","placeholder","Tamanho","required","",3,"ngModelChange","ngModel"],["name","quantidade","type","number","placeholder","Quantidade","required","",3,"ngModelChange","ngModel"],["type","submit"],["action","Seach"],["type","text"],[1,"scrollable-table"],[1,"tabela-madeiras"],[4,"ngFor","ngForOf"],[1,"btn-editar",3,"click"],[1,"btn-excluir",3,"click"]],template:function(t,a){t&1&&(i(0,"section")(1,"h2"),o(2,"Controle de Madeiras"),r(),i(3,"form",0),c("ngSubmit",function(){return a.adicionar()}),i(4,"input",1),M("ngModelChange",function(n){return g(a.novaMadeira.nome,n)||(a.novaMadeira.nome=n),n}),r(),i(5,"input",2),M("ngModelChange",function(n){return g(a.novaMadeira.tamanho,n)||(a.novaMadeira.tamanho=n),n}),r(),i(6,"input",3),M("ngModelChange",function(n){return g(a.novaMadeira.quantidade,n)||(a.novaMadeira.quantidade=n),n}),r(),i(7,"button",4),o(8,"Adicionar"),r()(),i(9,"form",5),I(10,"input",6),i(11,"button",4),o(12,"Procurar"),r()(),i(13,"div",7)(14,"table",8)(15,"thead")(16,"tr")(17,"th"),o(18,"Nome"),r(),i(19,"th"),o(20,"Tamanho"),r(),i(21,"th"),o(22,"Quantidade"),r(),i(23,"th"),o(24,"A\xE7\xF5es"),r()()(),i(25,"tbody"),E(26,H,12,3,"tr",9),r()()()()),t&2&&(l(4),u("ngModel",a.novaMadeira.nome),l(),u("ngModel",a.novaMadeira.tamanho),l(),u("ngModel",a.novaMadeira.quantidade),l(20),y("ngForOf",a.madeiras))},dependencies:[D,w,L,T,A,V,k,q,W,R,F],styles:["section[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}table.tabela-madeiras[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;max-height:80vh;overflow-y:auto;display:block}table.tabela-madeiras[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#333}table.tabela-madeiras[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}table.tabela-madeiras[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.btn-editar[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin:0 15px}.btn-editar[_ngcontent-%COMP%]:hover{background-color:#0b7dda}.btn-excluir[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin:0 15px}.btn-excluir[_ngcontent-%COMP%]:hover{background-color:#da190b}table.tabela-madeiras[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.tabela-madeiras[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:center}th[_ngcontent-%COMP%]{width:20vw}"]})};export{z as MadeirasComponent};
