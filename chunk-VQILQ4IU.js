import{a as Q}from"./chunk-MHGOT2T3.js";import{f as U,h as G,i as H,j as P,k as J,l as v,m as O,p as K}from"./chunk-2UIDV6SX.js";import{b as D,c as B,d as z,e as A,f as j,g as R,l as q,n as $}from"./chunk-LIY3GWMI.js";import{D as N}from"./chunk-EUBCM5F7.js";import{$ as x,Ia as c,Ma as k,Qb as T,Ra as V,Rb as W,Ub as L,Va as F,W as S,a as h,ab as w,c as E,cb as o,db as i,fb as y,g as _,gb as b,hb as d,ia as m,ib as l,ja as p,jb as C,kb as I,mb as g,nb as f,ob as u}from"./chunk-VQDQLYRV.js";var M=class s{constructor(n,e,t){this.firestore=n;this.logsService=e;this.auth=t}getFerramentas(){let n=P(this.firestore,"ferramentas");return G(n,{idField:"id"})}getFerramentaById(n){return _(this,null,function*(){let e=v(this.firestore,`ferramentas/${n}`),t=yield O(e);if(t.exists())return h({id:t.id},t.data())})}addFerramenta(n){let e=P(this.firestore,"ferramentas"),t=this.logsService.logAction(`Adicionando Ferramenta: Nome: ${n.nome}, Especifica\xE7\xE3o: ${n.especificacao}, Respons\xE1vel: ${n.responsavel}`,`${this.auth.currentUser?.email}`,"ADD");return this.logsService.addLog(t),H(e,n)}deleteFerramenta(n){return _(this,null,function*(){let e=v(this.firestore,`ferramentas/${n}`),r=(yield O(e)).data();if(r){let a=this.logsService.logAction(`Removendo Ferramenta: Nome: ${r.nome}, Especifica\xE7\xE3o: ${r.especificacao}, Respons\xE1vel: ${r.responsavel}`,`${this.auth.currentUser?.email}`,"REMOVE");this.logsService.addLog(a)}return J(e)})}updateFerramenta(n,e,t){let r=v(this.firestore,`ferramentas/${n}`);if(!e)throw new Error("ferramentaAntiga is undefined");return this.logsService.addLog(this.logsService.logAction(`EDIT Ferramenta: ${e.nome}, Especifica\xE7\xE3o: ${e.especificacao}, Respons\xE1vel: ${e.responsavel} 
        Para -> Nome: ${t.nome}, Especifica\xE7\xE3o: ${t.especificacao}, Respons\xE1vel: ${t.responsavel}`,`${this.auth.currentUser?.email}`,"EDIT")),K(r,t)}static \u0275fac=function(e){return new(e||s)(x(U),x(Q),x(N))};static \u0275prov=S({token:s,factory:s.\u0275fac,providedIn:"root"})};function ee(s,n){if(s&1){let e=y();o(0,"tr")(1,"td"),l(2),i(),o(3,"td"),l(4),i(),o(5,"td"),l(6),i(),o(7,"td")(8,"button",13),b("click",function(){let r=m(e).$implicit,a=d();return p(a.editar(r))}),l(9,"Editar"),i(),o(10,"button",14),b("click",function(){let r=m(e).$implicit,a=d();return p(a.excluir(r.id))}),l(11,"Excluir"),i()()()}if(s&2){let e=n.$implicit;c(2),C(e.nome),c(2),C(e.especificacao),c(2),C(e.responsavel)}}function te(s,n){if(s&1){let e=y();o(0,"div",15)(1,"div",16)(2,"h3",17),l(3,"Editar Ferramenta"),i(),o(4,"label",18)(5,"p",19),l(6,"Nome: "),i(),o(7,"input",20),u("ngModelChange",function(r){m(e);let a=d();return f(a.ferramentaEditando.nome,r)||(a.ferramentaEditando.nome=r),p(r)}),i()(),o(8,"label",18)(9,"p",19),l(10,"Especifica\xE7\xE3o: "),i(),o(11,"input",21),u("ngModelChange",function(r){m(e);let a=d();return f(a.ferramentaEditando.especificacao,r)||(a.ferramentaEditando.especificacao=r),p(r)}),i()(),o(12,"label",18)(13,"p",19),l(14,"Responsavel: "),i(),o(15,"input",22),u("ngModelChange",function(r){m(e);let a=d();return f(a.ferramentaEditando.responsavel,r)||(a.ferramentaEditando.responsavel=r),p(r)}),i()(),o(16,"div",23)(17,"button",24),b("click",function(){m(e);let r=d();return p(r.salvarEdicao())}),l(18,"Salvar"),i(),o(19,"button",25),b("click",function(){m(e);let r=d();return p(r.cancelarEdicao())}),l(20,"Cancelar"),i()()()()}if(s&2){let e=d();c(7),g("ngModel",e.ferramentaEditando.nome),c(4),g("ngModel",e.ferramentaEditando.especificacao),c(4),g("ngModel",e.ferramentaEditando.responsavel)}}var X=class s{constructor(n){this.ferramentaService=n}ferramentas=[];novaFerramenta=this.criarFerramentaVazia();ferramentaEditando=this.criarFerramentaVazia();editando=!1;catalogoFerramentas=[];termoBusca="";ngOnInit(){this.ferramentaService.getFerramentas().subscribe(n=>{this.catalogoFerramentas=n.map(e=>e.nome)}),this.carregarFerramentas()}adicionar(){this.validaFerramenta(this.novaFerramenta)?this.ferramentaService.addFerramenta(this.novaFerramenta).then(()=>{this.novaFerramenta=this.criarFerramentaVazia()}):alert("Ferramenta n\xE3o adicionada. Verifique os campos.")}editar(n){this.ferramentaEditando=h({},n),this.editando=!0}salvarEdicao(){return _(this,null,function*(){let n=yield this.ferramentaService.getFerramentaById(String(this.ferramentaEditando.id));if(this.ferramentaEditando.id){let e=this.ferramentaEditando,{id:t}=e,r=E(e,["id"]);this.ferramentaService.updateFerramenta(t,n,r).then(()=>{this.editando=!1})}})}cancelarEdicao(){this.editando=!1}excluir(n){confirm("Tem certeza que deseja excluir esta ferramenta?")&&this.ferramentaService.deleteFerramenta(n)}buscarFerramenta(){let n=this.termoBusca.trim().toLowerCase();if(n==="")this.carregarFerramentas();else{let e=this.ferramentas.filter(t=>t.nome.toLowerCase().includes(n));e.length===0?this.carregarFerramentas():this.ferramentas=e}}carregarFerramentas(){this.ferramentaService.getFerramentas().subscribe(n=>this.ferramentas=n)}criarFerramentaVazia(){return{nome:"",especificacao:"",responsavel:""}}validaFerramenta(n){return!n.nome||!n.especificacao||!n.responsavel?(alert("Todos os campos s\xE3o obrigat\xF3rios."),!1):!0}static \u0275fac=function(e){return new(e||s)(k(M))};static \u0275cmp=V({type:s,selectors:[["app-ferramentas"]],decls:28,vars:7,consts:[[1,"controle"],[1,"title"],[1,"form-wrap",3,"ngSubmit"],["name","nomeFerramenta","type","text","placeholder","Nome da ferramenta","required","",1,"input",3,"ngModelChange","ngModel"],["name","especificacao","type","text","placeholder","Especifica\xE7\xE3o","required","",1,"input",3,"ngModelChange","ngModel"],["name","responsavel","type","text","placeholder","Funcion\xE1rio ou Local","required","",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],[1,"form-toggle"],["type","text","placeholder","Buscar Ferramenta",1,"input-search",3,"ngModelChange","input","ngModel"],[1,"scrollable-table-tabela"],[1,"tabela"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn-sm","edit",3,"click"],[1,"btn-sm","delete",3,"click"],[1,"modal"],[1,"modal-content"],[1,"modal-title"],[1,"modal-label"],[1,"modal-label-text"],["name","nome","type","text","placeholder","Nome da ferramenta","required","",1,"input","modal-label-input",3,"ngModelChange","ngModel"],["name","especificacao","type","text","placeholder","Especifica\xE7\xE3o","required","",1,"input","modal-label-input",3,"ngModelChange","ngModel"],["name","responsavel","type","text","placeholder","Funcion\xE1rio ou Local","required","",1,"input","modal-label-input",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn",3,"click"],[1,"btn-secondary",3,"click"]],template:function(e,t){e&1&&(o(0,"section",0)(1,"h2",1),l(2,"Controle de Ferramentas"),i(),o(3,"form",2),b("ngSubmit",function(){return t.adicionar()}),o(4,"input",3),u("ngModelChange",function(a){return f(t.novaFerramenta.nome,a)||(t.novaFerramenta.nome=a),a}),i(),o(5,"input",4),u("ngModelChange",function(a){return f(t.novaFerramenta.especificacao,a)||(t.novaFerramenta.especificacao=a),a}),i(),o(6,"input",5),u("ngModelChange",function(a){return f(t.novaFerramenta.responsavel,a)||(t.novaFerramenta.responsavel=a),a}),i(),o(7,"button",6),l(8,"Adicionar"),i()(),o(9,"div",7)(10,"input",8),u("ngModelChange",function(a){return f(t.termoBusca,a)||(t.termoBusca=a),a}),b("input",function(){return t.buscarFerramenta()}),i()(),o(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th"),l(16,"Nome"),i(),o(17,"th"),l(18,"Especifica\xE7\xE3o"),i(),o(19,"th"),l(20,"Respons\xE1vel"),i(),o(21,"th"),l(22,"A\xE7\xF5es"),i()()(),o(23,"tbody"),F(24,ee,12,3,"tr",11),i()()(),o(25,"p"),l(26),i(),F(27,te,21,3,"div",12),i()),e&2&&(c(4),g("ngModel",t.novaFerramenta.nome),c(),g("ngModel",t.novaFerramenta.especificacao),c(),g("ngModel",t.novaFerramenta.responsavel),c(4),g("ngModel",t.termoBusca),c(14),w("ngForOf",t.ferramentas),c(2),I("Itens Cadastrados ",t.ferramentas.length,""),c(),w("ngIf",t.editando))},dependencies:[L,T,W,$,R,D,B,z,q,j,A],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f8f9fa;color:#333;padding:1rem}.controle[_ngcontent-%COMP%]{margin:auto;padding:1rem;padding-left:120px}.title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#2c3e50;text-align:center;margin:2rem 0 1.5rem;position:relative;text-transform:uppercase}.title[_ngcontent-%COMP%]:after{content:"";display:block;width:35vw;height:4px;background-color:#4f46e5;margin:.5rem auto 0;border-radius:2px}.form-toggle[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000d;display:flex;justify-content:center;flex-direction:column}.form-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;background-color:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 8px #0000000d}.no-shadow[_ngcontent-%COMP%]{box-shadow:none;padding:.5rem 0}.input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{flex:1 1 200px;padding:.7rem;border:1px solid #ccc;border-radius:6px;font-size:1rem;background-color:#fefefe}.input-search[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #ccc;border-radius:6px;font-size:1rem;background-color:#fefefe}.tamanho[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;flex:1 1 100%}.checkboxes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:center}.checkboxes[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-disabled[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:1rem;border-radius:6px;border:none;cursor:pointer;transition:.2s ease-in-out}.btn[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-sm.edit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-right:.5rem}.btn-sm.delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-sm[_ngcontent-%COMP%]:hover{opacity:.9}.btn-secondary[_ngcontent-%COMP%]{background-color:#352bec;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#4f46e5}.btn-disabled[_ngcontent-%COMP%]{background-color:#ccc;color:#666;cursor:not-allowed}.scrollable-table[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 8px #0000000d;margin-bottom:1rem}.tabela[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px;font-family:Arial,Helvetica,sans-serif;border-radius:8px;overflow:hidden}.scrollable-table-tabela[_ngcontent-%COMP%]{width:100%;max-height:58vh;overflow-y:auto;display:block;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 8px #0000000d;padding:1rem}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#adb5bd;border-radius:10px;border:2px solid #f1f1f1}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#868e96}.scrollable-table-tabela[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#adb5bd #f1f1f1}.tabela[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#f1f3f5;z-index:1;text-transform:uppercase;font-weight:600;transition:background-color .3s;box-shadow:0 2px 3px #00000008}.tabela[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabela[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #dee2e6;text-align:center;transition:background-color .2s ease,color .2s ease}.tabela[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;cursor:pointer}.tabela[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{background-color:#e9f5ff;color:#007bff}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;display:flex;justify-content:center;align-items:center;z-index:999}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:2rem;width:90%;max-width:600px;box-shadow:0 4px 20px #0003;overflow-y:auto;max-height:90vh}.modal-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2c3e50;text-align:center;margin:2rem 0 1.5rem;position:relative;text-transform:uppercase}.modal-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60%;height:4px;background-color:#4f46e5;margin:.5rem auto 0;border-radius:2px}.modal-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:1rem 0}.modal-label-text[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;text-transform:uppercase;font-weight:700}.modal-label-input[_ngcontent-%COMP%]{max-width:400px;width:100%}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem}.flex-1[_ngcontent-%COMP%]{flex:1 1 100%}@media (max-width: 768px){.form-wrap[_ngcontent-%COMP%], .tamanho[_ngcontent-%COMP%], .checkboxes[_ngcontent-%COMP%], .modal-actions[_ngcontent-%COMP%], .form-toggle[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%}.btn-sm[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.tabela[_ngcontent-%COMP%]{font-size:.9rem}}']})};export{X as FerramentasComponent};
