import{a as Fn,b as Vn,e as br,g as Y,h as a,i as De}from"./chunk-2HP4JIPC.js";var Hn=()=>{};var Bn=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Sr=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,h=s>>2,f=(s&3)<<4|c>>4,g=(c&15)<<2|u>>6,b=u&63;l||(b=64,o||(g=64)),i.push(t[h],t[f],t[g],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Sr(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||f==null)throw new It;let g=s<<2|c>>4;if(i.push(g),u!==64){let b=c<<4&240|u>>2;if(i.push(b),f!==64){let oe=u<<6&192|f;i.push(oe)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},It=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ar=function(n){let e=Bn(n);return jn.encodeByteArray(e,!0)},fe=function(n){return Ar(n).replace(/\./g,"")},pe=function(n){try{return jn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rr(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!kr(t)||(n[t]=Rr(n[t],e[t]));return n}function kr(n){return n!=="__proto__"}function Pr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Or=()=>Pr().__FIREBASE_DEFAULTS__,Cr=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Nr=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&pe(n[1]);return e&&JSON.parse(e)},Me=()=>{try{return Hn()||Or()||Cr()||Nr()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Et=n=>{var e,t;return(t=(e=Me())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ec=n=>{let e=Et(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yt=()=>{var n;return(n=Me())===null||n===void 0?void 0:n.config},Tt=n=>{var e;return(e=Me())===null||e===void 0?void 0:e[`_${n}`]};var Le=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function yc(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[fe(JSON.stringify(t)),fe(JSON.stringify(o)),""].join(".")}function w(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $n(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function Dr(){var n;let e=(n=Me())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zn(){return typeof window<"u"||wt()}function wt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gn(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Kn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jn(){let n=w();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Tc(){return!Dr()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yn(){try{return typeof indexedDB=="object"}catch{return!1}}function Xn(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Lr="FirebaseError",R=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Lr,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}},L=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Mr(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new R(r,c,i)}};function Mr(n,e){return n.replace(Ur,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Ur=/\{\$([^}]+)}/g;function wc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Qn(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function W(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(Wn(s)&&Wn(o)){if(!W(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Wn(n){return n!==null&&typeof n=="object"}function X(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ae(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ce(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Zn(n,e){let t=new vt(n,e);return t.subscribe.bind(t)}var vt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xr(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=_t),r.error===void 0&&(r.error=_t),r.complete===void 0&&(r.complete=_t);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xr(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _t(){}var bc=4*60*60*1e3;function p(n){return n&&n._delegate?n._delegate:n}function bt(n){return n.endsWith(".cloudworkstations.dev")}function ei(n){return a(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var C=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Q="[DEFAULT]";var St=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Le;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vr(e))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Q){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return a(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Q){return this.instances.has(e)}getOptions(e=Q){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fr(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Q){return this.component?this.component.multipleInstances?e:Q:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fr(n){return n===Q?void 0:n}function Vr(n){return n.instantiationMode==="EAGER"}var me=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new St(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var js={};br(js,{FirebaseError:()=>R,SDK_VERSION:()=>ee,_DEFAULT_ENTRY_NAME:()=>ge,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>Rs,_apps:()=>j,_clearComponents:()=>Ps,_components:()=>de,_getProvider:()=>Ie,_isFirebaseApp:()=>mi,_isFirebaseServerApp:()=>_,_registerComponent:()=>Z,_removeServiceInstance:()=>ks,_serverApps:()=>ue,deleteApp:()=>_i,getApp:()=>Vt,getApps:()=>Ns,initializeApp:()=>gi,initializeServerApp:()=>Cs,onLog:()=>Ds,registerVersion:()=>B,setLogLevel:()=>Ls});var At=[],m=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(m||{}),ti={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},Hr=m.INFO,Wr={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Br=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Wr[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},le=class{constructor(e){this.name=e,this._logLevel=Hr,this._logHandler=Br,this._userLogHandler=null,At.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ti[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}};function ni(n){At.forEach(e=>{e.setLogLevel(n)})}function ii(n,e){for(let t of At){let i=null;e&&e.level&&(i=ti[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...o)=>{let c=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&n({level:m[s].toLowerCase(),message:c,args:o,type:r.name})}}}var jr=(n,e)=>e.some(t=>n instanceof t),ri,si;function $r(){return ri||(ri=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zr(){return si||(si=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oi=new WeakMap,kt=new WeakMap,ai=new WeakMap,Rt=new WeakMap,Ot=new WeakMap;function qr(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(N(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&oi.set(t,n)}).catch(()=>{}),Ot.set(e,n),e}function Gr(n){if(kt.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});kt.set(n,e)}var Pt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kt.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ai.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return N(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ci(n){Pt=n(Pt)}function Kr(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Ue(this),e,...t);return ai.set(i,e.sort?e.sort():[e]),N(i)}:zr().includes(n)?function(...e){return n.apply(Ue(this),e),N(oi.get(this))}:function(...e){return N(n.apply(Ue(this),e))}}function Jr(n){return typeof n=="function"?Kr(n):(n instanceof IDBTransaction&&Gr(n),jr(n,$r())?new Proxy(n,Pt):n)}function N(n){if(n instanceof IDBRequest)return qr(n);if(Rt.has(n))return Rt.get(n);let e=Jr(n);return e!==n&&(Rt.set(n,e),Ot.set(e,n)),e}var Ue=n=>Ot.get(n);function ui(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=N(o);return i&&o.addEventListener("upgradeneeded",l=>{i(N(o.result),l.oldVersion,l.newVersion,N(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var Yr=["get","getKey","getAll","getAllKeys","count"],Xr=["put","add","delete","clear"],Ct=new Map;function li(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ct.get(e))return Ct.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Xr.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Yr.includes(t)))return;let s=function(o,...c){return a(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]})};return Ct.set(e,s),s}ci(n=>Vn(Fn({},n),{get:(e,t,i)=>li(e,t)||n.get(e,t,i),has:(e,t)=>!!li(e,t)||n.has(e,t)}));var Dt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qr(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Qr(n){let e=n.getComponent();return e?.type==="VERSION"}var xe="@firebase/app",Lt="0.12.1";var M=new le("@firebase/app"),Zr="@firebase/app-compat",es="@firebase/analytics-compat",ts="@firebase/analytics",ns="@firebase/app-check-compat",is="@firebase/app-check",rs="@firebase/auth",ss="@firebase/auth-compat",os="@firebase/database",as="@firebase/data-connect",cs="@firebase/database-compat",ls="@firebase/functions",us="@firebase/functions-compat",ds="@firebase/installations",hs="@firebase/installations-compat",fs="@firebase/messaging",ps="@firebase/messaging-compat",ms="@firebase/performance",gs="@firebase/performance-compat",_s="@firebase/remote-config",Is="@firebase/remote-config-compat",vs="@firebase/storage",Es="@firebase/storage-compat",ys="@firebase/firestore",Ts="@firebase/vertexai",ws="@firebase/firestore-compat",bs="firebase",Ss="11.7.1";var ge="[DEFAULT]",As={[xe]:"fire-core",[Zr]:"fire-core-compat",[ts]:"fire-analytics",[es]:"fire-analytics-compat",[is]:"fire-app-check",[ns]:"fire-app-check-compat",[rs]:"fire-auth",[ss]:"fire-auth-compat",[os]:"fire-rtdb",[as]:"fire-data-connect",[cs]:"fire-rtdb-compat",[ls]:"fire-fn",[us]:"fire-fn-compat",[ds]:"fire-iid",[hs]:"fire-iid-compat",[fs]:"fire-fcm",[ps]:"fire-fcm-compat",[ms]:"fire-perf",[gs]:"fire-perf-compat",[_s]:"fire-rc",[Is]:"fire-rc-compat",[vs]:"fire-gcs",[Es]:"fire-gcs-compat",[ys]:"fire-fst",[ws]:"fire-fst-compat",[Ts]:"fire-vertex","fire-js":"fire-js",[bs]:"fire-js-all"};var j=new Map,ue=new Map,de=new Map;function Mt(n,e){try{n.container.addComponent(e)}catch(t){M.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n,e){n.container.addOrOverwriteComponent(e)}function Z(n){let e=n.name;if(de.has(e))return M.debug(`There were multiple attempts to register component ${e}.`),!1;de.set(e,n);for(let t of j.values())Mt(t,n);for(let t of ue.values())Mt(t,n);return!0}function Ie(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ks(n,e,t=ge){Ie(n,e).clearInstance(t)}function mi(n){return n.options!==void 0}function _(n){return n==null?!1:n.settings!==void 0}function Ps(){de.clear()}var Os={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},k=new L("app","Firebase",Os);var Fe=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new C("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw k.create("app-deleted",{appName:this._name})}};function di(n,e){let t=pe(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}let r=JSON.parse(t).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}var Ut=class extends Fe{constructor(e,t,i,r){let s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{let c=e;super(c.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._serverConfig.authIdToken&&di(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&di(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,B(xe,Lt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_i(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw k.create("server-app-deleted")}};var ee=Ss;function gi(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ge,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw k.create("bad-app-name",{appName:String(r)});if(t||(t=yt()),!t)throw k.create("no-options");let s=j.get(r);if(s){if(W(t,s.options)&&W(i,s.config))return s;throw k.create("duplicate-app",{appName:r})}let o=new me(r);for(let l of de.values())o.addComponent(l);let c=new Fe(t,i,o);return j.set(r,c),c}function Cs(n,e){if(zn()&&!wt())throw k.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;mi(n)?t=n.options:t=n;let i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;let r=u=>[...u].reduce((h,f)=>Math.imul(31,h)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw k.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(i)),o=ue.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let c=new me(s);for(let u of de.values())c.addComponent(u);let l=new Ut(t,e,s,c);return ue.set(s,l),l}function Vt(n=ge){let e=j.get(n);if(!e&&n===ge&&yt())return gi();if(!e)throw k.create("no-app",{appName:n});return e}function Ns(){return Array.from(j.values())}function _i(n){return a(this,null,function*(){let e=!1,t=n.name;j.has(t)?(e=!0,j.delete(t)):ue.has(t)&&n.decRefCount()<=0&&(ue.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)})}function B(n,e,t){var i;let r=(i=As[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),M.warn(c.join(" "));return}Z(new C(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Ds(n,e){if(n!==null&&typeof n!="function")throw k.create("invalid-log-argument");ii(n,e)}function Ls(n){ni(n)}var Ms="firebase-heartbeat-database",Us=1,_e="firebase-heartbeat-store",Nt=null;function Ii(){return Nt||(Nt=ui(Ms,Us,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_e)}catch(t){console.warn(t)}}}}).catch(n=>{throw k.create("idb-open",{originalErrorMessage:n.message})})),Nt}function xs(n){return a(this,null,function*(){try{let t=(yield Ii()).transaction(_e),i=yield t.objectStore(_e).get(vi(n));return yield t.done,i}catch(e){if(e instanceof R)M.warn(e.message);else{let t=k.create("idb-get",{originalErrorMessage:e?.message});M.warn(t.message)}}})}function hi(n,e){return a(this,null,function*(){try{let i=(yield Ii()).transaction(_e,"readwrite");yield i.objectStore(_e).put(e,vi(n)),yield i.done}catch(t){if(t instanceof R)M.warn(t.message);else{let i=k.create("idb-set",{originalErrorMessage:t?.message});M.warn(i.message)}}})}function vi(n){return`${n.name}!${n.options.appId}`}var Fs=1024,Vs=30,xt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ft(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return a(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fi();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Vs){let o=Ws(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){M.warn(i)}})}getHeartbeatsHeader(){return a(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=fi(),{heartbeatsToSend:i,unsentEntries:r}=Hs(this._heartbeatsCache.heartbeats),s=fe(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return M.warn(t),""}})}};function fi(){return new Date().toISOString().substring(0,10)}function Hs(n,e=Fs){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),pi(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),pi(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Ft=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return a(this,null,function*(){return Yn()?Xn().then(()=>!0).catch(()=>!1):!1})}read(){return a(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield xs(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return a(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return a(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function pi(n){return fe(JSON.stringify({version:2,heartbeats:n})).length}function Ws(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Bs(n){Z(new C("platform-logger",e=>new Dt(e),"PRIVATE")),Z(new C("heartbeat",e=>new xt(e),"PRIVATE")),B(xe,Lt,n),B(xe,Lt,"esm2017"),B("fire-js","")}Bs("");var Gc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};var Kc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function $s(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function ji(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jc=$s,zs=ji,$i=new L("auth","Firebase",ji());var je=new le("@firebase/auth");function qs(n,...e){je.logLevel<=m.WARN&&je.warn(`Auth (${ee}): ${n}`,...e)}function He(n,...e){je.logLevel<=m.ERROR&&je.error(`Auth (${ee}): ${n}`,...e)}function A(n,...e){throw yn(n,...e)}function S(n,...e){return yn(n,...e)}function En(n,e,t){let i=Object.assign(Object.assign({},zs()),{[e]:t});return new L("auth","Firebase",i).create(e,{appName:n.name})}function T(n){return En(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function he(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&A(n,"argument-error"),En(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yn(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return $i.create(n,...e)}function d(n,e,...t){if(!n)throw yn(e,...t)}function D(n){let e="INTERNAL ASSERTION FAILED: "+n;throw He(e),new Error(e)}function F(n,e){n||D(e)}function Ae(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Tn(){return Ei()==="http:"||Ei()==="https:"}function Ei(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Gs(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tn()||Gn()||"connection"in navigator)?navigator.onLine:!0}function Ks(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var te=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,F(t>e,"Short delay should be less than long delay!"),this.isMobile=$n()||Kn()}get(){return Gs()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wn(n,e){F(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $e=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;D("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;D("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;D("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Js={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ys=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Xs=new te(3e4,6e4);function I(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function v(s,o,c,l){return a(this,arguments,function*(n,e,t,i,r={}){return zi(n,r,()=>a(null,null,function*(){let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});let f=X(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:g},u);return qn()||(b.referrerPolicy="no-referrer"),n.emulatorConfig&&bt(n.emulatorConfig.host)&&(b.credentials="include"),$e.fetch()(yield qi(n,n.config.apiHost,t,f),b)}))})}function zi(n,e,t){return a(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Js),e);try{let r=new zt(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ee(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ee(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ee(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ee(n,"user-disabled",o);let h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw En(n,h,u);A(n,h)}}catch(r){if(r instanceof R)throw r;A(n,"network-request-failed",{message:String(r)})}})}function H(s,o,c,l){return a(this,arguments,function*(n,e,t,i,r={}){let u=yield v(n,e,t,i,r);return"mfaPendingCredential"in u&&A(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function qi(n,e,t,i){return a(this,null,function*(){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?wn(n.config,r):`${n.config.apiScheme}://${r}`;return Ys.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function Qs(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zt=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(S(this.auth,"network-request-failed")),Xs.get())})}};function Ee(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=S(n,e,i);return r.customData._tokenResponse=t,r}function yi(n){return n!==void 0&&n.getResponse!==void 0}function Ti(n){return n!==void 0&&n.enterprise!==void 0}var ze=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qs(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Zs(n){return a(this,null,function*(){return(yield v(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function Gi(n,e){return a(this,null,function*(){return v(n,"GET","/v2/recaptchaConfig",I(n,e))})}function eo(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:delete",e)})}function to(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:update",e)})}function qe(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:lookup",e)})}function ye(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function no(n,e=!1){return a(this,null,function*(){let t=p(n),i=yield t.getIdToken(e),r=ot(i);d(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ye(Ht(r.auth_time)),issuedAtTime:ye(Ht(r.iat)),expirationTime:ye(Ht(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ht(n){return Number(n)*1e3}function ot(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return He("JWT malformed, contained fewer than 3 sections"),null;try{let r=pe(t);return r?JSON.parse(r):(He("Failed to decode base64 JWT payload"),null)}catch(r){return He("Caught error parsing JWT payload as JSON",r?.toString()),null}}function wi(n){let e=ot(n);return d(e,"internal-error"),d(typeof e.exp<"u","internal-error"),d(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function V(n,e,t=!1){return a(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof R&&io(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function io({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var qt=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>a(this,null,function*(){yield this.iteration()}),t)}iteration(){return a(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Re=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ye(this.lastLoginAt),this.creationTime=ye(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ke(n){return a(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield V(n,qe(t,{idToken:i}));d(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ki(s.providerUserInfo):[],c=so(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Re(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function ro(n){return a(this,null,function*(){let e=p(n);yield ke(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function so(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Ki(n){return n.map(e=>{var{providerId:t}=e,i=De(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function oo(n,e){return a(this,null,function*(){let t=yield zi(n,{},()=>a(null,null,function*(){let i=X({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=yield qi(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",$e.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function ao(n,e){return a(this,null,function*(){return v(n,"POST","/v2/accounts:revokeToken",I(n,e))})}var Te=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){d(e.idToken,"internal-error"),d(typeof e.idToken<"u","internal-error"),d(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){d(e.length!==0,"internal-error");let t=wi(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return a(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(d(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return a(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield oo(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(d(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(d(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(d(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return D("not implemented")}};function $(n,e){d(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var z=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=De(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Re(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return a(this,null,function*(){let t=yield V(this,this.stsTokenManager.getToken(this.auth,e));return d(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return no(this,e)}reload(){return ro(this)}_assign(e){this!==e&&(d(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){d(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return a(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ke(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return a(this,null,function*(){if(_(this.auth.app))return Promise.reject(T(this.auth));let e=yield this.getIdToken();return yield V(this,eo(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,u,h;let f=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,oe=(o=t.photoURL)!==null&&o!==void 0?o:void 0,Nn=(c=t.tenantId)!==null&&c!==void 0?c:void 0,ft=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,Dn=(u=t.createdAt)!==null&&u!==void 0?u:void 0,Ln=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:pt,emailVerified:Mn,isAnonymous:Un,providerData:mt,stsTokenManager:xn}=t;d(pt&&xn,e,"internal-error");let Tr=Te.fromJSON(this.name,xn);d(typeof pt=="string",e,"internal-error"),$(f,e.name),$(g,e.name),d(typeof Mn=="boolean",e,"internal-error"),d(typeof Un=="boolean",e,"internal-error"),$(b,e.name),$(oe,e.name),$(Nn,e.name),$(ft,e.name),$(Dn,e.name),$(Ln,e.name);let gt=new n({uid:pt,auth:e,email:g,emailVerified:Mn,displayName:f,isAnonymous:Un,photoURL:oe,phoneNumber:b,tenantId:Nn,stsTokenManager:Tr,createdAt:Dn,lastLoginAt:Ln});return mt&&Array.isArray(mt)&&(gt.providerData=mt.map(wr=>Object.assign({},wr))),ft&&(gt._redirectEventId=ft),gt}static _fromIdTokenResponse(e,t,i=!1){return a(this,null,function*(){let r=new Te;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ke(s),s})}static _fromGetAccountInfoResponse(e,t,i){return a(this,null,function*(){let r=t.users[0];d(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Ki(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Te;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Re(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var bi=new Map;function U(n){F(n instanceof Function,"Expected a class definition");let e=bi.get(n);return e?(F(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bi.set(n,e),e)}var co=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return a(this,null,function*(){return!0})}_set(t,i){return a(this,null,function*(){this.storage[t]=i})}_get(t){return a(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return a(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Si=co;function We(n,e,t){return`firebase:${n}:${e}:${t}`}var Ge=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=We(this.userKey,r.apiKey,s),this.fullPersistenceKey=We("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return a(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield qe(this.auth,{idToken:e}).catch(()=>{});return t?z._fromGetAccountInfoResponse(this.auth,t,e):null}return z._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return a(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return a(this,null,function*(){if(!t.length)return new n(U(Si),e,i);let r=(yield Promise.all(t.map(u=>a(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||U(Si),o=We(i,e.config.apiKey,e.name),c=null;for(let u of t)try{let h=yield u._get(o);if(h){let f;if(typeof h=="string"){let g=yield qe(e,{idToken:h}).catch(()=>{});if(!g)break;f=yield z._fromGetAccountInfoResponse(e,g,h)}else f=z._fromJSON(e,h);u!==s&&(c=f),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(u=>a(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,i))})}};function Ai(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qi(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ji(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(er(e))return"Blackberry";if(tr(e))return"Webos";if(Yi(e))return"Safari";if((e.includes("chrome/")||Xi(e))&&!e.includes("edge/"))return"Chrome";if(Zi(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Ji(n=w()){return/firefox\//i.test(n)}function Yi(n=w()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xi(n=w()){return/crios\//i.test(n)}function Qi(n=w()){return/iemobile/i.test(n)}function Zi(n=w()){return/android/i.test(n)}function er(n=w()){return/blackberry/i.test(n)}function tr(n=w()){return/webos/i.test(n)}function bn(n=w()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Yc(n=w()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function lo(n=w()){var e;return bn(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uo(){return Jn()&&document.documentMode===10}function nr(n=w()){return bn(n)||Zi(n)||tr(n)||er(n)||/windows phone/i.test(n)||Qi(n)}function ir(n,e=[]){let t;switch(n){case"Browser":t=Ai(w());break;case"Worker":t=`${Ai(w())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ee}/${i}`}var Gt=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return a(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function ho(t){return a(this,arguments,function*(n,e={}){return v(n,"GET","/v2/passwordPolicy",I(n,e))})}var fo=6,Kt=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fo,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Jt=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ke(this),this.idTokenSubscription=new Ke(this),this.beforeStateQueue=new Gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$i,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=U(t)),this._initializationPromise=this.queue(()=>a(this,null,function*(){var i,r,s;if(!this._deleted&&(this.persistenceManager=yield Ge.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return a(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return a(this,null,function*(){try{let t=yield qe(this,{idToken:e}),i=yield z._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return a(this,null,function*(){var t;if(_(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return d(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return a(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return a(this,null,function*(){try{yield ke(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ks()}_delete(){return a(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return a(this,null,function*(){if(_(this.app))return Promise.reject(T(this));let t=e?p(e):null;return t&&d(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return a(this,null,function*(){if(!this._deleted)return e&&d(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>a(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return a(this,null,function*(){return _(this.app)?Promise.reject(T(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _(this.app)?Promise.reject(T(this)):this.queue(()=>a(this,null,function*(){yield this.assertedPersistence.setPersistence(U(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return a(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return a(this,null,function*(){let e=yield ho(this),t=new Kt(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new L("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return a(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield ao(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return a(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return a(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&U(e)||this._popupRedirectResolver;d(t,this,"argument-error"),this.redirectPersistenceManager=yield Ge.create(this,[U(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return a(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>a(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return a(this,null,function*(){if(e===this.currentUser)return this.queue(()=>a(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(d(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return a(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return d(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ir(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return a(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return a(this,null,function*(){var e;if(_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&qs(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function y(n){return p(n)}var Ke=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zn(t=>this.observer=t)}get next(){return d(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ne={loadJS(){return a(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function po(n){Ne=n}function Sn(n){return Ne.loadJS(n)}function mo(){return Ne.recaptchaV2Script}function go(){return Ne.recaptchaEnterpriseScript}function _o(){return Ne.gapiScript}function rr(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Io=500,vo=6e4,Ve=1e12,Yt=class{constructor(e){this.auth=e,this.counter=Ve,this._widgets=new Map}render(e,t){let i=this.counter;return this._widgets.set(i,new Zt(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;let i=e||Ve;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;let i=e||Ve;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}execute(e){return a(this,null,function*(){var t;let i=e||Ve;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""})}},Xt=class{constructor(){this.enterprise=new Qt}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Qt=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Zt=class{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r=typeof e=="string"?document.getElementById(e):e;d(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Eo(50);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},vo)},Io))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}};function Eo(n){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}var yo="recaptcha-enterprise",we="NO_RECAPTCHA",Je=class{constructor(e){this.type=yo,this.auth=y(e)}verify(e="verify",t=!1){return a(this,null,function*(){function i(s){return a(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>a(null,null,function*(){Gi(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let u=new ze(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;Ti(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(we)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xt().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&Ti(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=go();l.length!==0&&(l+=c),Sn(l).then(()=>{r(c,s,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})})}};function ve(n,e,t,i=!1,r=!1){return a(this,null,function*(){let s=new Je(n),o;if(r)o=we;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function q(n,e,t,i,r){return a(this,null,function*(){var s,o;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield ve(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(c=>a(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=yield ve(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(c)}));else if(r==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let c=yield ve(n,e,t);return i(n,c).catch(l=>a(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield ve(n,e,t,!1,!0);return i(n,h)}return Promise.reject(l)}))}else{let c=yield ve(n,e,t,!1,!0);return i(n,c)}else return Promise.reject(r+" provider is not supported.")})}function To(n){return a(this,null,function*(){let e=y(n),t=yield Gi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new ze(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new Je(e).verify()})}function wo(n,e){let t=Ie(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(W(s,e??{}))return r;A(r,"already-initialized")}return t.initialize({options:e})}function bo(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(U);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function So(n,e,t){let i=y(n);d(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=sr(e),{host:o,port:c}=Ao(e),l=c===null?"":`:${c}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){d(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),d(W(u,i.config.emulator)&&W(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,r||Ro(),bt(o)&&ei(`${s}//${o}${l}`)}function sr(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ao(n){let e=sr(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Ri(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Ri(o)}}}function Ri(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Ro(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ne=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return D("not implemented")}_getIdTokenResponse(e){return D("not implemented")}_linkToIdToken(e,t){return D("not implemented")}_getReauthenticationResolver(e){return D("not implemented")}};function or(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:resetPassword",I(n,e))})}function ko(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:update",e)})}function Po(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:signUp",e)})}function Oo(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:update",I(n,e))})}function Co(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithPassword",I(n,e))})}function at(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:sendOobCode",I(n,e))})}function No(n,e){return a(this,null,function*(){return at(n,e)})}function Do(n,e){return a(this,null,function*(){return at(n,e)})}function Lo(n,e){return a(this,null,function*(){return at(n,e)})}function Mo(n,e){return a(this,null,function*(){return at(n,e)})}function Uo(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithEmailLink",I(n,e))})}function xo(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithEmailLink",I(n,e))})}var Ye=class n extends ne{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return a(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q(e,t,"signInWithPassword",Co,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Uo(e,{email:this._email,oobCode:this._password});default:A(e,"internal-error")}})}_linkToIdToken(e,t){return a(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q(e,i,"signUpPassword",Po,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return xo(e,{idToken:t,email:this._email,oobCode:this._password});default:A(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function x(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithIdp",I(n,e))})}var Fo="http://localhost",K=class n extends ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):A("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=De(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return x(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,x(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,x(e,t)}buildRequest(){let e={requestUri:Fo,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=X(t)}return e}};function ki(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:sendVerificationCode",I(n,e))})}function Vo(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithPhoneNumber",I(n,e))})}function Ho(n,e){return a(this,null,function*(){let t=yield H(n,"POST","/v1/accounts:signInWithPhoneNumber",I(n,e));if(t.temporaryProof)throw Ee(n,"account-exists-with-different-credential",t);return t})}var Wo={USER_NOT_FOUND:"user-not-found"};function Bo(n,e){return a(this,null,function*(){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return H(n,"POST","/v1/accounts:signInWithPhoneNumber",I(n,t),Wo)})}var Pe=class n extends ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Vo(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Ho(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Bo(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!t&&!r&&!s?null:new n({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s})}};function jo(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $o(n){let e=ae(ce(n)).link,t=e?ae(ce(e)).deep_link_id:null,i=ae(ce(n)).deep_link_id;return(i?ae(ce(i)).link:null)||i||t||e||n}var Xe=class n{constructor(e){var t,i,r,s,o,c;let l=ae(ce(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,f=jo((r=l.mode)!==null&&r!==void 0?r:null);d(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=$o(e);try{return new n(t)}catch{return null}}};var ar=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Ye._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Xe.parseLink(i);return d(r,"argument-error"),Ye._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),P=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var J=class extends P{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Pi=class n extends J{static credentialFromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;return d("providerId"in t&&"signInMethod"in t,"argument-error"),K._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return d(e.idToken||e.accessToken,"argument-error"),K._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return n.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:c}=e;if(!i&&!r&&!t&&!s||!c)return null;try{return new n(c)._credential({idToken:t,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}};var Xc=(()=>{class n extends J{constructor(){super("facebook.com")}static credential(t){return K._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),Qc=(()=>{class n extends J{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return K._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})(),Zc=(()=>{class n extends J{constructor(){super("github.com")}static credential(t){return K._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.GITHUB_SIGN_IN_METHOD="github.com",n.PROVIDER_ID="github.com";return n})(),zo="http://localhost",Qe=class n extends ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){let t=this.buildRequest();return x(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,x(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,x(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=t;return!i||!r||!s||i!==r?null:new n(i,s)}static _create(e,t){return new n(e,t)}buildRequest(){return{requestUri:zo,returnSecureToken:!0,pendingToken:this.pendingToken}}};var qo="saml.",Oi=class n extends P{constructor(e){d(e.startsWith(qo),"argument-error"),super(e)}static credentialFromResult(e){return n.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return n.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=Qe.fromJSON(e);return d(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Qe._create(i,t)}catch{return null}}};var el=(()=>{class n extends J{constructor(){super("twitter.com")}static credential(t,i){return K._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return n.credential(i,r)}catch{return null}}}n.TWITTER_SIGN_IN_METHOD="twitter.com",n.PROVIDER_ID="twitter.com";return n})();function cr(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signUp",I(n,e))})}var O=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return a(this,null,function*(){let s=yield z._fromIdTokenResponse(e,i,r),o=Ci(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return a(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Ci(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Ci(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function tl(n){return a(this,null,function*(){var e;if(_(n.app))return Promise.reject(T(n));let t=y(n);if(yield t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new O({user:t.currentUser,providerId:null,operationType:"signIn"});let i=yield cr(t,{returnSecureToken:!0}),r=yield O._fromIdTokenResponse(t,"signIn",i,!0);return yield t._updateCurrentUser(r.user),r})}var en=class n extends R{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function lr(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?en._fromErrorAndOperation(n,s,e,i):s})}function ur(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}function nl(n,e){return a(this,null,function*(){let t=p(n);yield ct(!0,t,e);let{providerUserInfo:i}=yield to(t.auth,{idToken:yield t.getIdToken(),deleteProvider:[e]}),r=ur(i||[]);return t.providerData=t.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(t.phoneNumber=null),yield t.auth._persistUserIfCurrent(t),t})}function An(n,e,t=!1){return a(this,null,function*(){let i=yield V(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return O._forOperation(n,"link",i)})}function ct(n,e,t){return a(this,null,function*(){yield ke(e);let i=ur(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";d(i.has(t)===n,e.auth,r)})}function dr(n,e,t=!1){return a(this,null,function*(){let{auth:i}=n;if(_(i.app))return Promise.reject(T(i));let r="reauthenticate";try{let s=yield V(n,lr(i,r,e,n),t);d(s.idToken,i,"internal-error");let o=ot(s.idToken);d(o,i,"internal-error");let{sub:c}=o;return d(n.uid===c,i,"user-mismatch"),O._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&A(i,"user-mismatch"),s}})}function hr(n,e,t=!1){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i="signIn",r=yield lr(n,i,e),s=yield O._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Rn(n,e){return a(this,null,function*(){return hr(y(n),e)})}function Go(n,e){return a(this,null,function*(){let t=p(n);return yield ct(!1,t,e.providerId),An(t,e)})}function Ko(n,e){return a(this,null,function*(){return dr(p(n),e)})}function Jo(n,e){return a(this,null,function*(){return H(n,"POST","/v1/accounts:signInWithCustomToken",I(n,e))})}function il(n,e){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let t=y(n),i=yield Jo(t,{token:e,returnSecureToken:!0}),r=yield O._fromIdTokenResponse(t,"signIn",i);return yield t._updateCurrentUser(r.user),r})}var ie=class{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tn._fromServerResponse(e,t):"totpInfo"in t?nn._fromServerResponse(e,t):A(e,"internal-error")}},tn=class n extends ie{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new n(t)}},nn=class n extends ie{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new n(t)}};function lt(n,e,t){var i;d(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),d(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),d(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(d(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(d(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function kn(n){return a(this,null,function*(){let e=y(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function rl(n,e,t){return a(this,null,function*(){let i=y(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&lt(i,r,t),yield q(i,r,"getOobCode",Do,"EMAIL_PASSWORD_PROVIDER")})}function sl(n,e,t){return a(this,null,function*(){yield or(p(n),{oobCode:e,newPassword:t}).catch(i=>a(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&kn(n),i}))})}function ol(n,e){return a(this,null,function*(){yield Oo(p(n),{oobCode:e})})}function Yo(n,e){return a(this,null,function*(){let t=p(n),i=yield or(t,{oobCode:e}),r=i.requestType;switch(d(r,t,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":d(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":d(i.mfaInfo,t,"internal-error");default:d(i.email,t,"internal-error")}let s=null;return i.mfaInfo&&(s=ie._fromServerResponse(y(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}})}function al(n,e){return a(this,null,function*(){let{data:t}=yield Yo(p(n),e);return t.email})}function cl(n,e,t){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i=y(n),o=yield q(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cr,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kn(n),l}),c=yield O._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function ll(n,e,t){return _(n.app)?Promise.reject(T(n)):Rn(p(n),ar.credential(e,t)).catch(i=>a(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&kn(n),i}))}function ul(n,e,t){return a(this,null,function*(){let i=y(n),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,c){d(c.handleCodeInApp,i,"argument-error"),c&&lt(i,o,c)}s(r,t),yield q(i,r,"getOobCode",Lo,"EMAIL_PASSWORD_PROVIDER")})}function dl(n,e){let t=Xe.parseLink(e);return t?.operation==="EMAIL_SIGNIN"}function hl(n,e,t){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i=p(n),r=ar.credentialWithLink(e,t||Ae());return d(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Rn(i,r)})}function Xo(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:createAuthUri",I(n,e))})}function fl(n,e){return a(this,null,function*(){let t=Tn()?Ae():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=yield Xo(p(n),i);return r||[]})}function pl(n,e){return a(this,null,function*(){let t=p(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&lt(t.auth,r,e);let{email:s}=yield No(t.auth,r);s!==n.email&&(yield n.reload())})}function ml(n,e,t){return a(this,null,function*(){let i=p(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield n.getIdToken(),newEmail:e};t&&lt(i.auth,s,t);let{email:o}=yield Mo(i.auth,s);o!==n.email&&(yield n.reload())})}function Qo(n,e){return a(this,null,function*(){return v(n,"POST","/v1/accounts:update",e)})}function gl(i,r){return a(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=p(n),c={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=yield V(s,Qo(s.auth,c));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;let u=s.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=s.displayName,u.photoURL=s.photoURL),yield s._updateTokensIfNecessary(l)})}function _l(n,e){let t=p(n);return _(t.auth.app)?Promise.reject(T(t.auth)):fr(t,e,null)}function Il(n,e){return fr(p(n),null,e)}function fr(n,e,t){return a(this,null,function*(){let{auth:i}=n,s={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);let o=yield V(n,ko(i,s));yield n._updateTokensIfNecessary(o,!0)})}function Zo(n){var e,t;if(!n)return null;let{providerId:i}=n,r=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&n?.idToken){let o=(t=(e=ot(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){let c=o!=="anonymous"&&o!=="custom"?o:null;return new G(s,c)}}if(!i)return null;switch(i){case"facebook.com":return new rn(s,r);case"github.com":return new sn(s,r);case"google.com":return new on(s,r);case"twitter.com":return new an(s,r,n.screenName||null);case"custom":case"anonymous":return new G(s,null);default:return new G(s,i,r)}}var G=class{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}},Ze=class extends G{constructor(e,t,i,r){super(e,t,i),this.username=r}},rn=class extends G{constructor(e,t){super(e,"facebook.com",t)}},sn=class extends Ze{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}},on=class extends G{constructor(e,t){super(e,"google.com",t)}},an=class extends Ze{constructor(e,t,i){super(e,"twitter.com",t,i)}};function vl(n){let{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Zo(t)}function ea(n,e,t,i){return p(n).onIdTokenChanged(e,t,i)}function ta(n,e,t){return p(n).beforeAuthStateChanged(e,t)}function El(n,e,t,i){return p(n).onAuthStateChanged(e,t,i)}function yl(n){return p(n).signOut()}var et=class n{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new n("enroll",e,t)}static _fromMfaPendingCredential(e){return new n("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e?.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return n._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return n._fromIdtoken(e.multiFactorSession.idToken)}return null}};var cn=class n{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){let i=y(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(c=>ie._fromServerResponse(i,c));d(r.mfaPendingCredential,i,"internal-error");let o=et._fromMfaPendingCredential(r.mfaPendingCredential);return new n(o,s,c=>a(null,null,function*(){let l=yield c._process(i,o);delete r.mfaInfo,delete r.mfaPendingCredential;let u=Object.assign(Object.assign({},r),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":let h=yield O._fromIdTokenResponse(i,t.operationType,u);return yield i._updateCurrentUser(h.user),h;case"reauthenticate":return d(t.user,i,"internal-error"),O._forOperation(t.user,t.operationType,u);default:A(i,"internal-error")}}))}resolveSignIn(e){return a(this,null,function*(){let t=e;return this.signInResolver(t)})}};function Tl(n,e){var t;let i=p(n),r=e;return d(e.customData.operationType,i,"argument-error"),d((t=r.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,i,"argument-error"),cn._fromError(i,r)}function Ni(n,e){return v(n,"POST","/v2/accounts/mfaEnrollment:start",I(n,e))}function na(n,e){return v(n,"POST","/v2/accounts/mfaEnrollment:finalize",I(n,e))}function ia(n,e){return v(n,"POST","/v2/accounts/mfaEnrollment:withdraw",I(n,e))}var ln=class n{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>ie._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new n(e)}getSession(){return a(this,null,function*(){return et._fromIdtoken(yield this.user.getIdToken(),this.user)})}enroll(e,t){return a(this,null,function*(){let i=e,r=yield this.getSession(),s=yield V(this.user,i._process(this.user.auth,r,t));return yield this.user._updateTokensIfNecessary(s),this.user.reload()})}unenroll(e){return a(this,null,function*(){let t=typeof e=="string"?e:e.uid,i=yield this.user.getIdToken();try{let r=yield V(this.user,ia(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),yield this.user._updateTokensIfNecessary(r),yield this.user.reload()}catch(r){throw r}})}},Wt=new WeakMap;function wl(n){let e=p(n);return Wt.has(e)||Wt.set(e,ln._fromUser(e)),Wt.get(e)}var tt="__sak";var nt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tt,"1"),this.storage.removeItem(tt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ra=1e3,sa=10,oa=(()=>{class n extends nt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nr(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);uo()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,sa):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},ra)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return a(this,null,function*(){yield Y(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return a(this,null,function*(){let i=yield Y(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return a(this,null,function*(){yield Y(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),aa=oa;var ca=(()=>{class n extends nt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),pr=ca;function la(n){return Promise.all(n.map(e=>a(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var ua=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return a(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(h=>a(this,null,function*(){return h(i.origin,o)})),u=yield la(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ut(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var un=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return a(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=ut("",20);r.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){let g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function E(){return window}function da(n){E().location.href=n}function Pn(){return typeof E().WorkerGlobalScope<"u"&&typeof E().importScripts=="function"}function ha(){return a(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function fa(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pa(){return Pn()?self:null}var mr="firebaseLocalStorageDb",ma=1,it="firebaseLocalStorage",gr="fbase_key",re=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dt(n,e){return n.transaction([it],e?"readwrite":"readonly").objectStore(it)}function ga(){let n=indexedDB.deleteDatabase(mr);return new re(n).toPromise()}function dn(){let n=indexedDB.open(mr,ma);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(it,{keyPath:gr})}catch(r){t(r)}}),n.addEventListener("success",()=>a(null,null,function*(){let i=n.result;i.objectStoreNames.contains(it)?e(i):(i.close(),yield ga(),e(yield dn()))}))})}function Di(n,e,t){return a(this,null,function*(){let i=dt(n,!0).put({[gr]:e,value:t});return new re(i).toPromise()})}function _a(n,e){return a(this,null,function*(){let t=dt(n,!1).get(e),i=yield new re(t).toPromise();return i===void 0?null:i.value})}function Li(n,e){let t=dt(n,!0).delete(e);return new re(t).toPromise()}var Ia=800,va=3,Ea=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return a(this,null,function*(){return this.db?this.db:(this.db=yield dn(),this.db)})}_withRetries(t){return a(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>va)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return a(this,null,function*(){return Pn()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return a(this,null,function*(){this.receiver=ua._getInstance(pa()),this.receiver._subscribe("keyChanged",(t,i)=>a(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>a(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return a(this,null,function*(){var t,i;if(this.activeServiceWorker=yield ha(),!this.activeServiceWorker)return;this.sender=new un(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return a(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||fa()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return a(this,null,function*(){try{if(!indexedDB)return!1;let t=yield dn();return yield Di(t,tt,"1"),yield Li(t,tt),!0}catch{}return!1})}_withPendingWrite(t){return a(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(r=>Di(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return a(this,null,function*(){let i=yield this._withRetries(r=>_a(r,t));return this.localCache[t]=i,i})}_remove(t){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(i=>Li(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return a(this,null,function*(){let t=yield this._withRetries(s=>{let o=dt(s,!1).getAll();return new re(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>a(this,null,function*(){return this._poll()}),Ia)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ya=Ea;function Mi(n,e){return v(n,"POST","/v2/accounts/mfaSignIn:start",I(n,e))}function Ta(n,e){return v(n,"POST","/v2/accounts/mfaSignIn:finalize",I(n,e))}var Bt=rr("rcb"),wa=new te(3e4,6e4),hn=class{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=E().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return d(ba(t),e,"argument-error"),this.shouldResolveImmediately(t)&&yi(E().grecaptcha)?Promise.resolve(E().grecaptcha):new Promise((i,r)=>{let s=E().setTimeout(()=>{r(S(e,"network-request-failed"))},wa.get());E()[Bt]=()=>{E().clearTimeout(s),delete E()[Bt];let c=E().grecaptcha;if(!c||!yi(c)){r(S(e,"internal-error"));return}let l=c.render;c.render=(u,h)=>{let f=l(u,h);return this.counter++,f},this.hostLanguage=t,i(c)};let o=`${mo()}?${X({onload:Bt,render:"explicit",hl:t})}`;Sn(o).catch(()=>{clearTimeout(s),r(S(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=E().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}};function ba(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}var fn=class{load(e){return a(this,null,function*(){return new Yt(e)})}clearedOneInstance(){}};var be="recaptcha",Sa={theme:"light",type:"image"},Ui=class{constructor(e,t,i=Object.assign({},Sa)){this.parameters=i,this.type=be,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=y(e),this.isInvisible=this.parameters.size==="invisible",d(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");let r=typeof t=="string"?document.getElementById(t):t;d(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fn:new hn,this.validateStartingState()}verify(){return a(this,null,function*(){this.assertNotDestroyed();let e=yield this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{let s=o=>{o&&(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){d(!this.parameters.sitekey,this.auth,"argument-error"),d(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),d(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){let i=E()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){d(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return a(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return a(this,null,function*(){d(Tn()&&!Pn(),this.auth,"internal-error"),yield Aa(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let e=yield Zs(this.auth);d(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return d(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Aa(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}var Oe=class{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=Pe._fromVerification(this.verificationId,e);return this.onConfirmation(t)}};function bl(n,e,t){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i=y(n),r=yield ht(i,e,p(t));return new Oe(r,s=>Rn(i,s))})}function Sl(n,e,t){return a(this,null,function*(){let i=p(n);yield ct(!1,i,"phone");let r=yield ht(i.auth,e,p(t));return new Oe(r,s=>Go(i,s))})}function Al(n,e,t){return a(this,null,function*(){let i=p(n);if(_(i.auth.app))return Promise.reject(T(i.auth));let r=yield ht(i.auth,e,p(t));return new Oe(r,s=>Ko(i,s))})}function ht(n,e,t){return a(this,null,function*(){var i;if(!n._getRecaptchaConfig())try{yield To(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){let s=r.session;if("phoneNumber"in r){d(s.type==="enroll",n,"internal-error");let o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield q(n,o,"mfaSmsEnrollment",(h,f)=>a(null,null,function*(){if(f.phoneEnrollmentInfo.captchaResponse===we){d(t?.type===be,h,"argument-error");let g=yield jt(h,f,t);return Ni(h,g)}return Ni(h,f)}),"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{d(s.type==="signin",n,"internal-error");let o=((i=r.multiFactorHint)===null||i===void 0?void 0:i.uid)||r.multiFactorUid;d(o,n,"missing-multi-factor-info");let c={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield q(n,c,"mfaSmsSignIn",(f,g)=>a(null,null,function*(){if(g.phoneSignInInfo.captchaResponse===we){d(t?.type===be,f,"argument-error");let b=yield jt(f,g,t);return Mi(f,b)}return Mi(f,g)}),"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{let s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield q(n,s,"sendVerificationCode",(u,h)=>a(null,null,function*(){if(h.captchaResponse===we){d(t?.type===be,u,"argument-error");let f=yield jt(u,h,t);return ki(u,f)}return ki(u,h)}),"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{t?._reset()}})}function Rl(n,e){return a(this,null,function*(){let t=p(n);if(_(t.auth.app))return Promise.reject(T(t.auth));yield An(t,e)})}function jt(n,e,t){return a(this,null,function*(){d(t.type===be,n,"argument-error");let i=yield t.verify();d(typeof i=="string",n,"argument-error");let r=Object.assign({},e);if("phoneEnrollmentInfo"in r){let s=r.phoneEnrollmentInfo.phoneNumber,o=r.phoneEnrollmentInfo.captchaResponse,c=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:o,clientType:c,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){let s=r.phoneSignInInfo.captchaResponse,o=r.phoneSignInInfo.clientType,c=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:o,recaptchaVersion:c}}),r}else return Object.assign(r,{recaptchaToken:i}),r})}var kl=(()=>{class n{constructor(t){this.providerId=n.PROVIDER_ID,this.auth=y(t)}verifyPhoneNumber(t,i){return ht(this.auth,t,p(i))}static credential(t,i){return Pe._fromVerification(t,i)}static credentialFromResult(t){let i=t;return n.credentialFromTaggedObject(i)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{phoneNumber:i,temporaryProof:r}=t;return i&&r?Pe._fromTokenResponse(i,r):null}}n.PROVIDER_ID="phone",n.PHONE_SIGN_IN_METHOD="phone";return n})();function se(n,e){return e?U(e):(d(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ce=class extends ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return x(e,this._buildIdpRequest())}_linkToIdToken(e,t){return x(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return x(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Ra(n){return hr(n.auth,new Ce(n),n.bypassAuthState)}function ka(n){let{auth:e,user:t}=n;return d(t,e,"internal-error"),dr(t,new Ce(n),n.bypassAuthState)}function Pa(n){return a(this,null,function*(){let{auth:e,user:t}=n;return d(t,e,"internal-error"),An(t,new Ce(n),n.bypassAuthState)})}var rt=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>a(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return a(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ra;case"linkViaPopup":case"linkViaRedirect":return Pa;case"reauthViaPopup":case"reauthViaRedirect":return ka;default:A(this.auth,"internal-error")}}resolve(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Oa=new te(2e3,1e4);function Pl(n,e,t){return a(this,null,function*(){if(_(n.app))return Promise.reject(S(n,"operation-not-supported-in-this-environment"));let i=y(n);he(n,e,P);let r=se(i,t);return new On(i,"signInViaPopup",e,r).executeNotNull()})}function Ol(n,e,t){return a(this,null,function*(){let i=p(n);if(_(i.auth.app))return Promise.reject(S(i.auth,"operation-not-supported-in-this-environment"));he(i.auth,e,P);let r=se(i.auth,t);return new On(i.auth,"reauthViaPopup",e,r,i).executeNotNull()})}function Cl(n,e,t){return a(this,null,function*(){let i=p(n);he(i.auth,e,P);let r=se(i.auth,t);return new On(i.auth,"linkViaPopup",e,r,i).executeNotNull()})}var On=(()=>{class n extends rt{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return a(this,null,function*(){let t=yield this.execute();return d(t,this.auth,"internal-error"),t})}onExecution(){return a(this,null,function*(){F(this.filter.length===1,"Popup operations only handle one event");let t=ut();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(S(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(S(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(S(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Oa.get())};t()}}n.currentPopupAction=null;return n})(),Ca="pendingRedirect",Se=new Map,pn=class n extends rt{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return a(this,null,function*(){let e=Se.get(this.auth._key());if(!e){try{let i=(yield Na(this.resolver,this.auth))?yield Y(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Se.set(this.auth._key(),e)}return this.bypassAuthState||Se.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return a(this,null,function*(){if(e.type==="signInViaRedirect")return Y(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Y(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return a(this,null,function*(){})}cleanUp(){}};function Na(n,e){return a(this,null,function*(){let t=Ir(e),i=_r(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function Cn(n,e){return a(this,null,function*(){return _r(n)._set(Ir(e),"true")})}function Nl(){Se.clear()}function Da(n,e){Se.set(n._key(),e)}function _r(n){return U(n._redirectPersistence)}function Ir(n){return We(Ca,n.config.apiKey,n.name)}function Dl(n,e,t){return La(n,e,t)}function La(n,e,t){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i=y(n);he(n,e,P),yield i._initializationPromise;let r=se(i,t);return yield Cn(r,i),r._openRedirect(i,e,"signInViaRedirect")})}function Ll(n,e,t){return Ma(n,e,t)}function Ma(n,e,t){return a(this,null,function*(){let i=p(n);if(he(i.auth,e,P),_(i.auth.app))return Promise.reject(T(i.auth));yield i.auth._initializationPromise;let r=se(i.auth,t);yield Cn(r,i.auth);let s=yield Er(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)})}function Ml(n,e,t){return Ua(n,e,t)}function Ua(n,e,t){return a(this,null,function*(){let i=p(n);he(i.auth,e,P),yield i.auth._initializationPromise;let r=se(i.auth,t);yield ct(!1,i,e.providerId),yield Cn(r,i.auth);let s=yield Er(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)})}function Ul(n,e){return a(this,null,function*(){return yield y(n)._initializationPromise,vr(n,e,!1)})}function vr(n,e,t=!1){return a(this,null,function*(){if(_(n.app))return Promise.reject(T(n));let i=y(n),r=se(i,e),o=yield new pn(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}function Er(n){return a(this,null,function*(){let e=ut(`${n.uid}:::`);return n._redirectEventId=e,yield n.auth._setRedirectUser(n),yield n.auth._persistUserIfCurrent(n),e})}var xa=10*60*1e3,mn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fa(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yr(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(S(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xa&&this.cachedEventUids.clear(),this.cachedEventUids.has(xi(e))}saveEventToCache(e){this.cachedEventUids.add(xi(e)),this.lastProcessedEventTime=Date.now()}};function xi(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yr({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Fa(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yr(n);default:return!1}}function Va(t){return a(this,arguments,function*(n,e={}){return v(n,"GET","/v1/projects",e)})}var Ha=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wa=/^https?/;function Ba(n){return a(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Va(n);for(let t of e)try{if(ja(t))return}catch{}A(n,"unauthorized-domain")})}function ja(n){let e=Ae(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Wa.test(t))return!1;if(Ha.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var $a=new te(3e4,6e4);function Fi(){let n=E().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function za(n){return new Promise((e,t)=>{var i,r,s;function o(){Fi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fi(),t(S(n,"network-request-failed"))},timeout:$a.get()})}if(!((r=(i=E().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=E().gapi)===null||s===void 0)&&s.load)o();else{let c=rr("iframefcb");return E()[c]=()=>{gapi.load?o():t(S(n,"network-request-failed"))},Sn(`${_o()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Be=null,e})}var Be=null;function qa(n){return Be=Be||za(n),Be}var Ga=new te(5e3,15e3),Ka="__/auth/iframe",Ja="emulator/auth/iframe",Ya={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qa(n){let e=n.config;d(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?wn(e,Ja):`https://${n.config.authDomain}/${Ka}`,i={apiKey:e.apiKey,appName:n.name,v:ee},r=Xa.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${X(i).slice(1)}`}function Za(n){return a(this,null,function*(){let e=yield qa(n),t=E().gapi;return d(t,n,"internal-error"),e.open({where:document.body,url:Qa(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ya,dontclear:!0},i=>new Promise((r,s)=>a(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=S(n,"network-request-failed"),c=E().setTimeout(()=>{s(o)},Ga.get());function l(){E().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var ec={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tc=500,nc=600,ic="_blank",rc="http://localhost",st=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sc(n,e,t,i=tc,r=nc){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},ec),{width:i.toString(),height:r.toString(),top:s,left:o}),u=w().toLowerCase();t&&(c=Xi(u)?ic:t),Ji(u)&&(e=e||rc,l.scrollbars="yes");let h=Object.entries(l).reduce((g,[b,oe])=>`${g}${b}=${oe},`,"");if(lo(u)&&c!=="_self")return oc(e||"",c),new st(null);let f=window.open(e||"",c,h);d(f,n,"popup-blocked");try{f.focus()}catch{}return new st(f)}function oc(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var ac="__/auth/handler",cc="emulator/auth/handler",lc=encodeURIComponent("fac");function Vi(n,e,t,i,r,s){return a(this,null,function*(){d(n.config.authDomain,n,"auth-domain-config-required"),d(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ee,eventId:r};if(e instanceof P){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Qn(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof J){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let l=yield n._getAppCheckToken(),u=l?`#${lc}=${encodeURIComponent(l)}`:"";return`${uc(n)}?${X(c).slice(1)}${u}`})}function uc({config:n}){return n.emulator?wn(n,cc):`https://${n.authDomain}/${ac}`}var $t="webStorageSupport",gn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pr,this._completeRedirectFn=vr,this._overrideRedirectResult=Da}_openPopup(e,t,i,r){return a(this,null,function*(){var s;F((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Vi(e,t,i,Ae(),r);return sc(e,o,ut())})}_openRedirect(e,t,i,r){return a(this,null,function*(){yield this._originValidation(e);let s=yield Vi(e,t,i,Ae(),r);return da(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(F(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return a(this,null,function*(){let t=yield Za(e),i=new mn(e);return t.register("authEvent",r=>(d(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($t,{type:$t},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[$t];o!==void 0&&t(!!o),A(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ba(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nr()||Yi()||bn()}},dc=gn,_n=class{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return D("unexpected MultiFactorSessionType")}}},In=class n extends _n{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,i){return na(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Ta(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},xl=(()=>{class n{constructor(){}static assertion(t){return In._fromCredential(t)}}return n.FACTOR_ID="phone",n})();var Hi="@firebase/auth",Wi="1.10.2";var vn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return a(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){d(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hc(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fc(n){Z(new C("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;d(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ir(n)},u=new Jt(i,r,s,l);return bo(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Z(new C("auth-internal",e=>{let t=y(e.getProvider("auth").getImmediate());return(i=>new vn(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),B(Hi,Wi,hc(n)),B(Hi,Wi,"esm2017")}var pc=5*60,mc=Tt("authIdTokenMaxAge")||pc,Bi=null,gc=n=>e=>a(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>mc)return;let r=t?.token;Bi!==r&&(Bi=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Fl(n=Vt()){let e=Ie(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wo(n,{popupRedirectResolver:dc,persistence:[ya,aa,pr]}),i=Tt("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=gc(s.toString());ta(t,o,()=>o(t.currentUser)),ea(t,c=>o(c))}}let r=Et("auth");return r&&So(t,`http://${r}`),t}function _c(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}po({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=S("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",_c().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fc("Browser");export{jn as a,Rr as b,Pr as c,Ec as d,Le as e,yc as f,w as g,Dr as h,Gn as i,Kn as j,Jn as k,Tc as l,Yn as m,R as n,L as o,wc as p,W as q,ae as r,Zn as s,p as t,bt as u,ei as v,C as w,m as x,le as y,ge as z,Mt as A,Rs as B,Z as C,Ie as D,_ as E,ee as F,gi as G,Vt as H,Ns as I,_i as J,B as K,Ds as L,Ls as M,js as N,Gc as O,Kc as P,Jc as Q,A as R,S,d as T,F as U,U as V,Si as W,We as X,Zi as Y,bn as Z,Yc as _,y as $,So as aa,ne as ba,K as ca,ar as da,Pi as ea,Xc as fa,Qc as ga,Zc as ha,Qe as ia,Oi as ja,el as ka,tl as la,nl as ma,Rn as na,Go as oa,Ko as pa,il as qa,rl as ra,sl as sa,ol as ta,Yo as ua,al as va,cl as wa,ll as xa,ul as ya,dl as za,hl as Aa,fl as Ba,pl as Ca,ml as Da,gl as Ea,_l as Fa,Il as Ga,vl as Ha,El as Ia,yl as Ja,Tl as Ka,wl as La,aa as Ma,pr as Na,ut as Oa,ya as Pa,Ui as Qa,bl as Ra,Sl as Sa,Al as Ta,Rl as Ua,kl as Va,Pl as Wa,Ol as Xa,Cl as Ya,Nl as Za,Da as _a,Dl as $a,Ll as ab,Ml as bb,Ul as cb,vr as db,mn as eb,Va as fb,Vi as gb,dc as hb,xl as ib,Fl as jb};
