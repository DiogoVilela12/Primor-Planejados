import{a as F}from"./chunk-MHGOT2T3.js";import"./chunk-2UIDV6SX.js";import{b as y,c as v,f as E,n as k}from"./chunk-LIY3GWMI.js";import"./chunk-EUBCM5F7.js";import{Ia as a,Ma as f,Pb as P,Qb as S,Ra as u,Ub as L,Va as h,ab as m,cb as n,db as r,gb as C,hb as x,ib as i,jb as g,kb as b,mb as _,nb as M,ob as O,qb as w}from"./chunk-VQDQLYRV.js";var T=(l,e,t,o)=>({"badge badge-delete":l,"badge badge-edit":e,"badge badge-add":t,"badge badge-login":o});function N(l,e){if(l&1&&(n(0,"tr")(1,"td"),i(2),r(),n(3,"td"),i(4),r(),n(5,"td"),i(6),r(),n(7,"td")(8,"span",8),i(9),r()()()),l&2){let t=e.$implicit,o=x();a(2),g(t.userId),a(2),g(o.formatFirebaseTimestamp(t.timestamp)),a(2),g(t.details),a(2),m("ngClass",w(5,T,t.action==="Excluir",t.action==="Editar",t.action==="Adicionar",t.action==="Login")),a(),b(" ",t.action," ")}}var D=class l{constructor(e){this.logService=e}logsList=[];logsFiltrados=[];filtro="";ngOnInit(){this.receberLogs()}receberLogs(){this.logService.getLogs().subscribe(e=>{this.logsList=e,this.logsList.sort((t,o)=>{let c=d=>d?typeof d.toDate=="function"?d.toDate().getTime():d instanceof Date?d.getTime():0:0,s=c(t.timestamp),p=c(o.timestamp);return this.logsFiltrados=this.logsList,p-s})})}filtrarLogs(){let e=this.filtro.toLowerCase();this.logsFiltrados=this.logsList.filter(t=>t.userId?.toLowerCase().includes(e)||t.details?.toLowerCase().includes(e)||t.action?.toLowerCase().includes(e))}formatFirebaseTimestamp(e){if(!e||typeof e.toDate!="function")return"Data inv\xE1lida";let t=e.toDate(),o=String(t.getDate()).padStart(2,"0"),c=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear(),p=String(t.getHours()).padStart(2,"0"),d=String(t.getMinutes()).padStart(2,"0"),I=String(t.getSeconds()).padStart(2,"0");return`${o}/${c}/${s} ${p}:${d}:${I}`}static \u0275fac=function(t){return new(t||l)(f(F))};static \u0275cmp=u({type:l,selectors:[["app-logs"]],decls:22,vars:3,consts:[[1,"controle"],[1,"title"],[1,"form-wrap","no-shadow"],["type","text","placeholder","Filtrar por usu\xE1rio, a\xE7\xE3o ou detalhes",1,"input",3,"ngModelChange","input","ngModel"],[1,"scrollable-table"],[1,"scrollable-table-tabela"],[1,"tabela"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,o){t&1&&(n(0,"section",0)(1,"h2",1),i(2,"Logs do Sistema"),r(),n(3,"div",2)(4,"input",3),O("ngModelChange",function(s){return M(o.filtro,s)||(o.filtro=s),s}),C("input",function(){return o.filtrarLogs()}),r()(),n(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),i(11,"Usu\xE1rio"),r(),n(12,"th"),i(13,"Hor\xE1rio"),r(),n(14,"th"),i(15,"Detalhes"),r(),n(16,"th"),i(17,"A\xE7\xE3o"),r()()(),n(18,"tbody"),h(19,N,10,10,"tr",7),r()()()(),n(20,"p"),i(21),r()()),t&2&&(a(4),_("ngModel",o.filtro),a(15),m("ngForOf",o.logsFiltrados),a(2),b("Logs Vis\xEDveis: ",o.logsFiltrados.length,""))},dependencies:[L,P,S,k,y,v,E],styles:['.controle[_ngcontent-%COMP%]{margin:auto;padding:1rem;padding-left:120px}.title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#2c3e50;text-align:center;margin:2rem 0 1.5rem;position:relative;text-transform:uppercase}.title[_ngcontent-%COMP%]:after{content:"";display:block;width:35vw;height:4px;background-color:#4f46e5;margin:.5rem auto 0;border-radius:2px}.form-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;background-color:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 8px #0000000d}.input[_ngcontent-%COMP%]{padding:.6rem 1rem;width:100%;border:1px solid #ccc;border-radius:8px;font-size:1rem}.scrollable-table-tabela[_ngcontent-%COMP%]{width:100%;max-height:58vh;overflow-y:auto;display:block;border:1px solid #dee2e6;border-radius:8px}.scrollable-table[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 8px #0000000d;margin-bottom:1rem}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#adb5bd;border-radius:10px;border:2px solid #f1f1f1}.scrollable-table-tabela[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#868e96}.scrollable-table-tabela[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#adb5bd #f1f1f1}.tabela[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#f1f3f5;z-index:1;text-transform:uppercase;font-weight:600;transition:background-color .3s;box-shadow:0 2px 3px #00000008}.tabela[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabela[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #dee2e6;text-align:center;transition:background-color .2s ease,color .2s ease}.tabela[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;cursor:pointer}.tabela[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{background-color:#e9f5ff;color:#007bff}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .6rem;border-radius:6px;font-weight:700;font-size:.85rem;color:#fff;text-transform:uppercase;white-space:nowrap}.badge-delete[_ngcontent-%COMP%]{background-color:#dc3545}.badge-edit[_ngcontent-%COMP%]{background-color:#007bff}.badge-add[_ngcontent-%COMP%]{background-color:#28a745}.badge-login[_ngcontent-%COMP%]{background-color:#6f42c1}p[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#444}']})};export{D as LogsComponent};
